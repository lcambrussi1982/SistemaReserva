<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>relatorios ‚Ä¢ Col√©gio Estadual Padre Ponciano</title>
  <link rel="stylesheet" href="./css/cambrussi.css">
</head>
<body>
  
<header class="header">
  <div class="head-wrap">
    <div class="brand-side">
      <div class="logo"><img src="./assets/logo-colegio.svg" alt="Logo"></div>
      <div class="titles">
        <div class="brand-title">Col√©gio Estadual Padre Ponciano</div>
        <div class="brand-sub">Sistema desenvolvido pela Cambrussi Technologies ‚Ä¢ Dados sincronizados na nuvem (Firebase Firestore)</div>
      </div>
    </div>
    <div class="userbox" id="userbox"></div><div class="userbox"><button id="darkToggle" class="btn ghost" style="padding:6px 10px">üåô</button></div>
  </div>
  <nav class="navbar">
    <a href='./index.html' >In√≠cio</a>
    <a href='./reservas.html' >Reservas</a>
    <a href='./dispositivos.html' >Dispositivos</a>
    <a href='./relatorios.html' aria-current="page">Relat√≥rios</a>
    <a href='./cadastros.html' class='only-admin' >Cadastros</a>
    <a href='./tutorial.html' >Tutorial</a>
    </nav>
</header>

  <main class="main container">
<section class="card">
  <h2>Relat√≥rios</h2>
  <div class="grid cols-3">
    <div><label>De</label><input id="de" class="input" type="date"></div>
    <div><label>At√©</label><input id="ate" class="input" type="date"></div>
    <div style="align-self:end"><button id="btn" class="btn">Gerar</button></div>
  </div>
  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
    <button id="csv" class="btn ghost">Exportar CSV</button>
    <button id="backup" class="btn ghost only-admin">Backup JSON</button>
    <label class="btn ghost only-admin" style="cursor:pointer">Restaurar JSON<input id="restore" type="file" accept=".json" style="display:none"></label>
  </div>
</section>
<section class="card" id="saida"></section>
</main>
  
<footer class="footer">
  <small>¬© <span id="y"></span> Col√©gio Estadual Padre Ponciano ‚Ä¢ Sistema desenvolvido pela Cambrussi Technologies</small>
  <script>document.getElementById('y').textContent=new Date().getFullYear()</script>
</footer>

  <script type="module">
    import { setupShell } from "./js/ui-shell.js";
    import { requireAuth } from "./js/auth.js";
    requireAuth(); setupShell();
  </script>
  <script type="module" src="./js/app-relatorios.js"></script>

  <script>
    // redireciona admin de primeiro acesso para configurar e-mail/senha
    try{
      const must = localStorage.getItem('SRE_REQUIRE_ADMIN_SETUP')==='1';
      const u = JSON.parse(localStorage.getItem('SRE_SESSION')||'null');
      if(must && u && u.role==='ADMIN' && u.email==='admin'){
        location.href = 'admin-setup.html';
      }
    }catch{}
  </script>

</body>
</html>